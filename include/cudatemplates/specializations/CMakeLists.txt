macro(specialize Name Dim)
  set(Name ${ARGV0})
  string(TOUPPER ${Name} NAME)
  string(TOLOWER ${Name} name)
  set(Dim ${ARGV1})
  math(EXPR DimMax "${Dim} - 1")
  foreach(i RANGE 0 ${DimMax})
    if(i)
      set(SizeArgDecl "${SizeArgDecl}, size_t s${i}")
      set(SizeArgs "${SizeArgs}, s${i}")
    else(i)
      set(SizeArgDecl "size_t s${i}")
      set(SizeArgs "s${i}")
    endif(i)
  endforeach(i)
  configure_file(${CMAKE_CURRENT_SOURCE_DIR}/${name}.hpp.in ${CMAKE_CURRENT_SOURCE_DIR}/${name}${Dim}d.hpp)
endmacro(specialize)

specialize(HostMemoryHeap 1)
specialize(HostMemoryHeap 2)
specialize(HostMemoryHeap 3)
